# โ ุฅุตูุงุญ: ุชุญุฏูุซ ุนุฏุงุฏ ุงูุฅุดุนุงุฑุงุช Realtime

## โ ุชู ุงูุฅุตูุงุญ!

ุชู ุฅุถุงูุฉ script ููุงุณุชูุงุน ููุฅุดุนุงุฑุงุช realtime ูุชุญุฏูุซ ุงูุนุฏุงุฏ ุชููุงุฆูุงู.

## ๐ง ูุง ุชู ุฅุถุงูุชู:

1. **Pusher JS** - ุชู ุฅุถุงูุชู ูู layout
2. **Realtime Listener** - ูุณุชูุน ููุฅุดุนุงุฑุงุช ุนุจุฑ Pusher
3. **Auto Update Badge** - ูุญุฏุซ ุงูุนุฏุงุฏ ุชููุงุฆูุงู ุนูุฏ ุงุณุชูุงู ุฅุดุนุงุฑ ุฌุฏูุฏ

## ๐ ุงููููุงุช ุงููุญุฏุซุฉ:

- `resources/views/layouts/app.blade.php`:
  - ุฅุถุงูุฉ Pusher JS
  - ุฅุถุงูุฉ script ููุงุณุชูุงุน ููุฅุดุนุงุฑุงุช realtime
  - ุฏุงูุฉ `updateNotificationBadge()` ูุชุญุฏูุซ ุงูุนุฏุงุฏ

## ๐ ููู ูุนูู:

### 1. ุนูุฏ ุชุญููู ุงูุตูุญุฉ:
- ูุชู ุชุญููู Pusher JS
- ูุชู ุงูุงุชุตุงู ุจู Pusher
- ูุชู ุงูุงุดุชุฑุงู ูู channel: `private-user.{userId}`
- ูุชู ุงูุงุณุชูุงุน ูุญุฏุซ: `notification.sent`

### 2. ุนูุฏ ุงุณุชูุงู ุฅุดุนุงุฑ ุฌุฏูุฏ:
- ูุชู ุงุณุชุฏุนุงุก `updateNotificationBadge(data.unread_count)`
- ูุชู ุชุญุฏูุซ ุงูุนุฏุงุฏ ูู:
  - Navbar badge
  - Footer badge
  - Menu badge
  - Page title

### 3. Polling Fallback:
- ูู 30 ุซุงููุฉ ูุชู ุชุญุฏูุซ ุงูุนุฏุงุฏ (fallback ุฅุฐุง Pusher ูุดู)

## ๐ ุงูุชุญูู:

### ุงูุชุญ Console ูู ุงููุชุตูุญ (F12):

ุงุจุญุซ ุนู:
- `โ ูุชุตู ุจู Pusher ููุฅุดุนุงุฑุงุช realtime`
- `โ ุชู ุงูุงุดุชุฑุงู ูู ุฅุดุนุงุฑุงุช realtime ูููุณุชุฎุฏู: {userId}`
- `โ ุฅุดุนุงุฑ ุฌุฏูุฏ realtime: {data}`
- `๐ ุชู ุชุญุฏูุซ ุนุฏุงุฏ ุงูุฅุดุนุงุฑุงุช: {count}`

### ุงุฎุชุจุฑ:

1. ุงูุชุญ ุตูุญุฉ ูู ุงููุชุตูุญ
2. ูู terminal ุขุฎุฑ:
   ```bash
   php artisan notification:test 2
   ```
3. ุฑุงูุจ Console - ูุฌุจ ุฃู ูุธูุฑ:
   - `โ ุฅุดุนุงุฑ ุฌุฏูุฏ realtime`
   - `๐ ุชู ุชุญุฏูุซ ุนุฏุงุฏ ุงูุฅุดุนุงุฑุงุช`
4. ุฑุงูุจ Badge - ูุฌุจ ุฃู ูุชุบูุฑ ุงูุฑูู ุชููุงุฆูุงู!

## โ๏ธ ููุงุญุธุงุช:

1. **API Token**: ูุฌุจ ุฃู ูููู ููุฌูุฏ ูู `localStorage.getItem('api_token')`
2. **User ID**: ูุชู ุงูุญุตูู ุนููู ูู `Auth::id()` ุชููุงุฆูุงู
3. **Pusher Config**: ูุฌุจ ุฃู ูููู `BROADCAST_CONNECTION=pusher` ูู `.env`

## ๐ ุฅุฐุง ูู ูุนูู:

### 1. ุชุญูู ูู Console:
- ูู Pusher ูุญูููุ
- ูู ุงูุงุชุตุงู ูุงุฌุญุ
- ูู ุงูุงุดุชุฑุงู ูู channel ูุงุฌุญุ

### 2. ุชุญูู ูู API Token:
```javascript
console.log('API Token:', localStorage.getItem('api_token'));
```

### 3. ุชุญูู ูู Logs:
```bash
Get-Content storage/logs/laravel.log -Tail 50 | Select-String -Pattern "Broadcasting channel authorization"
```

---

**ุงูุขู ุนุฏุงุฏ ุงูุฅุดุนุงุฑุงุช ูุฌุจ ุฃู ูุชุญุฏุซ realtime!** โ
